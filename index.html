<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title> Playground Equipments in Pittsburgh </title>
    <link href="style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css' rel='stylesheet' />
</head>

<body>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>



    <div class="header">
        <h1> Playground Equipments in Pittsburgh </h1>
    </div>

    <div class="container">
        <div class="left">
            <div class="iconDatacontainer" style=" text-align: center;">
                <img src="icon/playground.svg" width="70px" height="70px" alt="surface">
                <h6 style="color: #336666;font-size: 1.2em;">123 Playgrounds in Pittsburgh</h6>

                <img src="icon/toy2.svg" width="70px" height="70px" alt="surface">
                <h6 style="color: #336666;font-size: 1.2em;">445 Playground Equipments</h6>
            </div>

            <div class="iconDatacontainer" id="disability_donut" style=" text-align: center;">
                <img src="icon/disability_fill.svg" id="disability_icon" width="70px" height="70px" alt="disability">
                <div class="donutsChartClass" id="adaDonuts"></div>
            </div>


            <div class="iconDatacontainer" id="safety_donut" style=" text-align: center;">
                <img src="icon/safety-certificate.svg" id="safety_icon" width="70px" height="70px" alt="safety">
                <div class="donutsChartClass" id="safetySurfaceDonuts"></div>
            </div>

        </div>

        <div class="right">
            <div class="map-container">
                <div id="mapid"></div>
                <div class='map-overlay' id='maplegends'></div>
                <div class='map-overlay' id='numfeatures'>
                    <h3 style="left: 10px">Playgrounds in Pittsburgh</h3>
                    <div id='numcontains'>
                        <p>Hover over a point! </br>Or click on a point to see more detials.</p>
                    </div>
                </div>
            </div>
            <canvas class="chartCanvas" id="adaAccessableChart"></canvas>
            <canvas class="chartCanvas" id="safetySurfaceChart"></canvas>
        </div>

        <div style=" text-align: center; padding-top: 80px;">
            <img src="icon/playworld.svg" width="100px" height="100px" alt="surface">
            <h6 style="color: #336666;font-size: 1.2em;">"playworld" accounts for 50.9% of all playground equipment in
                Pittsburgh </h6>
        </div>
        <div id="sunburst_container" style="height: 600px"></div>
        <div style=" text-align: center; padding-top: 80px;">
            <img src="icon/fire hydrant-fill.svg" width="100px" height="100px" alt="surface">
        </div>
        <div class="chartClass" id="lineChartContainer"></div>
        <div style=" text-align: center; padding-top: 80px;">
            <img src="icon/neighborhood.svg" width="100px" height="100px" alt="surface">
        </div>
        <div class="treeMapcontainerClass">
            <div class="chartClass" id="treeMapcontainer"></div>
        </div>
        <div class="block" style="height: 100px;"></div>


        <script>
            // the two stack barchart
            const adaAccessableEles = document.getElementById('adaAccessableChart');
            const safetySurfaceEles = document.getElementById('safetySurfaceChart');
            // labels
            let byManufactLabels = ['Playworld', 'Little Tykes', 'Unknown', 'Gametime',
                'Landscape Structures', 'Kompan', 'Park Structures', 'Big Toys',
                'Iron Mountain Forge', 'Burke', 'Miracle']
            // processed datasets
            let adaAccessableData = {
                labels: byManufactLabels,
                datasets: [
                    {
                        label: 'Not ada accessable',
                        data: [175, 56, 29, 28, 12, 16, 10, 12, 9, 2, 1],
                        borderColor: 'rgb(224,243,219)',
                        backgroundColor: 'rgb(67,162,202)',

                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Not ada accessable'
                        }
                    },
                    {
                        label: 'Ada accessable',
                        data: [52, 20, 3, 4, 7, 2, 3, 1, 0, 1, 2],
                        borderColor: 'rgb(224,243,219)',
                        backgroundColor: 'rgb(168,221,181)',
                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Ada accessable'
                        }
                    }]
            }

            let safetySurfaceData = {
                labels: byManufactLabels,
                datasets: [
                    {
                        label: 'Engineered Wood Fiber',
                        data: [1, 0, 5, 0, 0, 0, 0, 6, 3, 0, 0],
                        borderColor: 'rgb(166, 186, 237)',
                        backgroundColor: 'rgb(37,52,148)',

                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Engineered Wood Fiber'
                        }
                    },
                    {
                        label: 'Greenpark Breakfall',
                        data: [14, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0],
                        borderColor: 'rgb(138, 227, 207)',
                        backgroundColor: 'rgb(44,127,184)',
                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Greenpark Breakfall'
                        }
                    },
                    {
                        label: 'Pour in Place',
                        data: [56, 34, 3, 14, 11, 0, 9, 4, 2, 3, 0],
                        borderColor: 'rgb(138, 227, 207)',
                        backgroundColor: 'rgb(65,182,196)',
                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Pour in Place'
                        }
                    },
                    {
                        label: 'Soft Surfaces',
                        data: [132, 33, 7, 13, 3, 0, 3, 3, 2, 0, 3],
                        borderColor: 'rgb(138, 227, 207)',
                        backgroundColor: 'rgb(127,205,187)',
                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Soft Surfaces'
                        }
                    },
                    {
                        label: 'Tiles',
                        data: [17, 5, 1, 4, 0, 0, 1, 0, 2, 0, 0],
                        borderColor: 'rgb(138, 227, 207)',
                        backgroundColor: 'rgb(199,233,180)',
                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Tiles'
                        }
                    },
                    {
                        label: 'Unknown',
                        data: [7, 2, 16, 0, 5, 18, 0, 0, 0, 0, 0],
                        borderColor: 'rgb(138, 227, 207)',
                        backgroundColor: 'rgb(224,243,219)',
                        parsing: {
                            xAxisKey: byManufactLabels,
                            yAxisKey: 'Unknown'
                        }
                    }
                ]
            };

            //charts from chart.js
            const adaAccessable_Chart = new Chart(
                adaAccessableEles,
                {
                    type: 'bar',
                    data: adaAccessableData,

                    options: {
                        scales: {
                            x: {
                                grid: {
                                    display: false
                                },

                                stacked: true,
                            },
                            y: {
                                stacked: true,

                            }
                        },
                        elements: {
                            bar: {
                                hoverBorderColor: 'black',
                                hoverBorderWidth: 2,
                                hoverBackgroundColor: adaAccessableEles.backgroundColor,
                            }
                        },
                        animation: true,
                        plugins: {

                            legend: {
                                display: true,
                                position: 'left',
                                labels: {
                                    font: {
                                        family: 'Montserrat',
                                    },
                                },

                            },
                            title: {
                                display: true,
                                text: 'Manufacturers and Americans with Disabilities Act(Ada) Accessibility of playgrounds',
                                font: {
                                    weight: 'bold',
                                    size: 22,
                                    family: 'Montserrat',
                                },

                            },
                            subtitle: {
                                display: true,
                                text: 'Part of these playgrounds allow children with disabilities to come and have fun',
                                font: {
                                    size: 12,
                                    style: 'italic',
                                    family: 'Montserrat',
                                },
                                padding: {
                                    bottom: 10
                                }
                            }

                        },
                        onClick: (event, elements, chart) => {
                            let HideIndex = 1
                            if (elements.length === 1) {
                                if (elements[0].datasetIndex == 1) {
                                    HideIndex = 0
                                }
                                chart.setDatasetVisibility(HideIndex, false);
                                chart.update();
                            }
                            if (elements.length === 0) {
                                chart.setDatasetVisibility(0, true);
                                chart.setDatasetVisibility(1, true);
                                chart.update();

                            }
                        }
                    }
                }
            )
            //charts from chart.js
            const safetySurfaceChart = new Chart(
                safetySurfaceEles,
                {
                    type: 'bar',
                    data: safetySurfaceData,

                    options: {
                        scales: {
                            x: {
                                grid: {
                                    display: false
                                },
                                stacked: true,
                            },
                            y: {
                                stacked: true,
                            }
                        },
                        elements: {
                            bar: {
                                hoverBorderColor: 'black',
                                hoverBorderWidth: 2,
                                hoverBackgroundColor: safetySurfaceEles.backgroundColor,
                            }
                        },
                        animation: true,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'left',
                                labels: {
                                    font: {
                                        family: 'Montserrat',
                                    },
                                },
                            },
                            title: {
                                display: true,
                                text: 'Manufacturers and safety surface types',
                                font: {
                                    family: 'Montserrat',
                                    weight: 'bold',
                                    size: 22
                                }
                            },
                            subtitle: {
                                display: true,
                                text: 'Safety surface protects children from injury during play',
                                font: {
                                    size: 12,
                                    family: 'Montserrat',
                                    style: 'italic'
                                }, padding: {
                                    bottom: 10
                                }
                            }
                        },
                        onClick: (event, elements, chart) => {
                            console.log('click', elements);
                            console.log(chart.options);
                            if (elements.length === 1) {
                                chart.setDatasetVisibility(0, false);
                                chart.setDatasetVisibility(1, false);
                                chart.setDatasetVisibility(2, false);
                                chart.setDatasetVisibility(3, false);
                                chart.setDatasetVisibility(4, false);
                                chart.setDatasetVisibility(5, false);
                                let display_index = elements[0].datasetIndex

                                chart.setDatasetVisibility(display_index, true);
                                chart.update();
                            }
                            if (elements.length === 0) {
                                chart.setDatasetVisibility(0, true);
                                chart.setDatasetVisibility(1, true);
                                chart.setDatasetVisibility(2, true);
                                chart.setDatasetVisibility(3, true);
                                chart.setDatasetVisibility(4, true);
                                chart.setDatasetVisibility(5, true);
                                chart.update();

                            }
                        }
                    }
                }
            )



        </script>

        <script>
            //two donut chart
            let adaDonutsEles = document.getElementById("adaDonuts");
            let adaDonutsMyChart = echarts.init(adaDonutsEles);
            let adaDonutsOption = {
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    show: false
                },
                series: [
                    {
                        name: 'Ada accessability',
                        type: 'pie',
                        radius: ['40%', '70%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                            borderRadius: 10,
                            borderColor: '#FFFFCC',
                            borderWidth: 2
                        },
                        label: {
                            show: false,
                            position: 'center',
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: '15',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            { value: 350, name: 'Not ada accessable' },
                            { value: 95, name: 'Ada accessable' }
                        ]
                    }
                ],
                color: ['rgb(67,162,202)', 'rgb(168,221,181)']

            };



            let safetySurfaceDonutsEles = document.getElementById("safetySurfaceDonuts");
            let safetySurfaceDonutsMyChart = echarts.init(safetySurfaceDonutsEles);
            let safetySurfaceDonutsOption = {
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    show: false
                },
                series: [
                    {
                        name: 'Safety surface type',
                        type: 'pie',
                        radius: ['40%', '70%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                            borderRadius: 10,
                            borderColor: '#FFFFCC',
                            borderWidth: 2
                        },
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: '15',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            { value: 199, name: 'Soft Surfaces' },
                            { value: 136, name: 'Pour in Place' },
                            { value: 48, name: 'Unknown' },
                            { value: 30, name: 'Tiles' },
                            { value: 17, name: 'Greenpark Breakfall' },
                            { value: 15, name: 'Engineered Wood Fiber' }
                        ]
                    }
                ],

                color: ['rgb(127,205,187)', 'rgb(65,182,196)', 'rgb(224,243,219)', 'rgb(199,233,180)', 'rgb(44,127,184)', 'rgb(37,52,148)']

            };
            if (adaDonutsOption && typeof adaDonutsOption === 'object') {
                adaDonutsMyChart.setOption(adaDonutsOption);
            }
            if (safetySurfaceDonutsOption && typeof safetySurfaceDonutsOption === 'object') {
                safetySurfaceDonutsMyChart.setOption(safetySurfaceDonutsOption);
            }
            adaDonutsMyChart.on('click', { seriesIndex: 0, name: 'Not ada accessable' }, function () {
                adaAccessable_Chart.setDatasetVisibility(1, false);
                adaAccessable_Chart.update();

            })
            adaDonutsMyChart.on('click', { seriesIndex: 0, name: 'Ada accessable' }, function () {
                adaAccessable_Chart.setDatasetVisibility(0, false);
                adaAccessable_Chart.update();
            })
            adaDonutsMyChart.getZr().on('click', function (event) {
                if (!event.target) {
                    adaAccessable_Chart.setDatasetVisibility(0, true);
                    adaAccessable_Chart.setDatasetVisibility(1, true);
                    adaAccessable_Chart.update();
                }
            });

            safetySurfaceDonutsMyChart.on('click', { seriesIndex: 0, name: 'Soft Surfaces' }, function () {
                safetySurfaceChart.setDatasetVisibility(0, false);
                safetySurfaceChart.setDatasetVisibility(1, false);
                safetySurfaceChart.setDatasetVisibility(2, false);
                safetySurfaceChart.setDatasetVisibility(3, false);
                safetySurfaceChart.setDatasetVisibility(4, false);
                safetySurfaceChart.setDatasetVisibility(5, false);
                safetySurfaceChart.setDatasetVisibility(3, true);
                safetySurfaceChart.update();

            })
            safetySurfaceDonutsMyChart.on('click', { seriesIndex: 0, name: 'Pour in Place' }, function () {
                safetySurfaceChart.setDatasetVisibility(0, false);
                safetySurfaceChart.setDatasetVisibility(1, false);
                safetySurfaceChart.setDatasetVisibility(2, false);
                safetySurfaceChart.setDatasetVisibility(3, false);
                safetySurfaceChart.setDatasetVisibility(4, false);
                safetySurfaceChart.setDatasetVisibility(5, false);
                safetySurfaceChart.setDatasetVisibility(2, true);
                safetySurfaceChart.update();
            })
            safetySurfaceDonutsMyChart.on('click', { seriesIndex: 0, name: 'Unknown' }, function () {
                safetySurfaceChart.setDatasetVisibility(0, false);
                safetySurfaceChart.setDatasetVisibility(1, false);
                safetySurfaceChart.setDatasetVisibility(2, false);
                safetySurfaceChart.setDatasetVisibility(3, false);
                safetySurfaceChart.setDatasetVisibility(4, false);
                safetySurfaceChart.setDatasetVisibility(5, false);
                safetySurfaceChart.setDatasetVisibility(5, true);
                safetySurfaceChart.update();
            })
            safetySurfaceDonutsMyChart.on('click', { seriesIndex: 0, name: 'Tiles' }, function () {
                safetySurfaceChart.setDatasetVisibility(0, false);
                safetySurfaceChart.setDatasetVisibility(1, false);
                safetySurfaceChart.setDatasetVisibility(2, false);
                safetySurfaceChart.setDatasetVisibility(3, false);
                safetySurfaceChart.setDatasetVisibility(4, false);
                safetySurfaceChart.setDatasetVisibility(5, false);
                safetySurfaceChart.setDatasetVisibility(4, true);
                safetySurfaceChart.update();
            })
            safetySurfaceDonutsMyChart.on('click', { seriesIndex: 0, name: 'Greenpark Breakfall' }, function () {
                safetySurfaceChart.setDatasetVisibility(0, false);
                safetySurfaceChart.setDatasetVisibility(1, false);
                safetySurfaceChart.setDatasetVisibility(2, false);
                safetySurfaceChart.setDatasetVisibility(3, false);
                safetySurfaceChart.setDatasetVisibility(4, false);
                safetySurfaceChart.setDatasetVisibility(5, false);
                safetySurfaceChart.setDatasetVisibility(1, true);
                safetySurfaceChart.update();
            })
            safetySurfaceDonutsMyChart.on('click', { seriesIndex: 0, name: 'Engineered Wood Fiber' }, function () {
                safetySurfaceChart.setDatasetVisibility(0, false);
                safetySurfaceChart.setDatasetVisibility(1, false);
                safetySurfaceChart.setDatasetVisibility(2, false);
                safetySurfaceChart.setDatasetVisibility(3, false);
                safetySurfaceChart.setDatasetVisibility(4, false);
                safetySurfaceChart.setDatasetVisibility(5, false);
                safetySurfaceChart.setDatasetVisibility(0, true);
                safetySurfaceChart.update();
            })
            safetySurfaceDonutsMyChart.getZr().on('click', function (event) {
                if (!event.target) {
                    safetySurfaceChart.setDatasetVisibility(0, true);
                    safetySurfaceChart.setDatasetVisibility(1, true);
                    safetySurfaceChart.setDatasetVisibility(2, true);
                    safetySurfaceChart.setDatasetVisibility(3, true);
                    safetySurfaceChart.setDatasetVisibility(4, true);
                    safetySurfaceChart.setDatasetVisibility(5, true);
                    safetySurfaceChart.update();
                }
            });



        </script>

        <script>

            // the map script
            mapboxgl.accessToken = 'pk.eyJ1IjoiamVycnlsdW9qaWF3ZWkiLCJhIjoiY2t0M3c4dHh0MGNvNTJ2czBxZzBucXFpdCJ9.8xcx_a2UWKPMKVgDaRxjGA';
            let map = new mapboxgl.Map({
                container: 'mapid',
                style: 'mapbox://styles/jerryluojiawei/cktgmqzbx4ef917macdp54ebo/draft',
                center: [-79.981211, 40.429807],
                zoom: 11.11
            });

            map.on('load', 'playgroundequipments', e => {
                let map_legend = [{
                    "name": "Pour in Place",
                    "color": "#081d58"
                },
                {
                    "name": "Soft Surfaces",
                    "color": "#253494"
                },
                {
                    "name": "Tiles",
                    "color": "#225ea8"
                },
                {
                    "name": "Greenpark Breakfall",
                    "color": "#1d91c0"
                },
                {
                    "name": "Engineered Wood Fiber",
                    "color": "#41b6c4"
                },
                {
                    "name": "Unknown",
                    "color": "#c7e9b4"
                }
                ];
                //legends, part of code adapted from tutorials 
                let legend_type = document.querySelector('#maplegends');
                let legendTitle = document.createElement('div')
                legendTitle.innerHTML='<b>Safety surface types</b>'
                legend_type.appendChild(legendTitle)

                for (let legend of map_legend) {
                    let item = document.createElement('div');
                    let key = document.createElement('span');
                    key.classList.add('legend-keys');
                    key.style.backgroundColor = legend.color;

                    let value = document.createElement('span');
                    value.innerHTML = legend.name;
                    item.appendChild(key);
                    item.appendChild(value);
                    legend_type.appendChild(item);
                };

                map.on('click', 'playgroundequipments', e => {

                    const feature = e.features[0];
                    adaBoolean = 'Not ada accessible'
                    if (feature.properties.ada_accessible == 1) {
                        adaBoolean = 'Ada accessible'
                    }
                    new mapboxgl.Popup({ offset: [0, -10] }).setLngLat(e.lngLat)
                        .setHTML(
                            `<span class = 'popupspan'><h6>${feature.properties.name}</h6><p><i>${feature.properties.street_number} 
                            ${feature.properties.street}</i>, The playground has <b>${feature.properties.equipment_type}</b> with safety surface
                             <b>${feature.properties.safety_surface_type}</b> produced by company <b style = 'color:#CC9933'>${feature.properties.manufacturer}</b>.
                             For Americans with Disabilities Act, it is <b>${adaBoolean}</b></p></span>`
                        )
                        .addTo(map);
                });
                map.on('mousemove', e => {
                    let playgroundinfo = map.queryRenderedFeatures(e.point, {
                        layers: ['playgroundequipments']
                    });
                    if (playgroundinfo.length > 0) {

                        document.querySelector('#numcontains').innerHTML = '<p><em>' + playgroundinfo[0].properties.name + '</em></p>'
                            + '<p>Located in ' + playgroundinfo[0].properties.street_number + ' ' + playgroundinfo[0].properties.street
                        '</p><p>' + playgroundinfo[0].properties.address + '</p>';
                    } else {
                        document.querySelector('#numcontains').innerHTML = '<p>Hover over a point! </br>Or click on a point to see more detials.</p>';
                    }
                });
                map.on('mouseenter', 'playgroundequipments', e => {
                    map.getCanvas().style.cursor = 'pointer';
                });

                map.on('mouseleave', 'playgroundequipments', e => {
                    map.getCanvas().style.cursor = '';
                });

            })
            map.addControl(new mapboxgl.ScaleControl());
            map.addControl(new mapboxgl.FullscreenControl());
            map.addControl(new mapboxgl.NavigationControl());

        </script>

        <script>
            //treemap script
            var divisionTreeEles = document.getElementById("treeMapcontainer");
            var divisionTreeChart = echarts.init(divisionTreeEles);

            var divisionTreeoption;

            // preprocessed data
            let diskData = [{
                name: 'neighbourhood name',
                value: 445,
                children: [{
                    name: 'Squirrel Hill South',
                    value: 32
                },
                {
                    name: 'East Liberty',
                    value: 26
                }, {
                    name: 'Beechview',
                    value: 21
                }, {
                    name: 'Allegheny Center',
                    value: 15
                },
                {
                    name: 'South Side Slopes',
                    value: 14
                },
                {
                    name: 'Sheraden',
                    value: 13
                },
                {
                    name: 'Hazelwood',
                    value: 13
                },
                {
                    name: 'Elliott',
                    value: 11
                },
                {
                    name: 'Squirrel Hill North',
                    value: 10
                },
                {
                    name: 'Mount Washington',
                    value: 10
                }, {
                    name: 'Beltzhoover',
                    value: 10
                }, {
                    name: 'Highland Park',
                    value: 10
                }, {
                    name: 'Regent Square',
                    value: 9
                }, {
                    name: 'Lincoln Place',
                    value: 9
                },
                {
                    name: 'Garfield',
                    value: 9
                }, {
                    name: 'South Oakland',
                    value: 9
                }, {
                    name: 'Crawford-Roberts',
                    value: 8
                }, {
                    name: 'Fineview',
                    value: 8
                },
                {
                    name: 'Brighton Heights',
                    value: 8
                },
                {
                    name: 'Bloomfield',
                    value: 7
                },
                {
                    name: 'Greenfield',
                    value: 7
                },
                {
                    name: 'Carrick',
                    value: 7
                },
                {
                    name: 'Brookline',
                    value: 7
                },
                {
                    name: 'Troy Hill',
                    value: 7
                },
                {
                    name: 'Manchester',
                    value: 7
                },
                {
                    name: 'Perry North',
                    value: 6
                },
                {
                    name: 'Lincoln-Lemington-Belmar',
                    value: 6
                },
                {
                    name: 'Swisshelm Park',
                    value: 6
                },
                {
                    name: 'Banksville',
                    value: 6
                },
                {
                    name: 'Marshall-Shadeland',
                    value: 5
                },
                {
                    name: 'Shadyside',
                    value: 5
                },
                {
                    name: 'Windgap',
                    value: 5
                },
                {
                    name: 'Crafton Heights',
                    value: 5
                },
                {
                    name: 'Upper Hill',
                    value: 5
                },
                {
                    name: 'New Homestead',
                    value: 5
                },
                {
                    name: 'Morningside',
                    value: 5
                },
                {
                    name: 'Upper Lawrenceville',
                    value: 5
                },
                {
                    name: 'South Side Flats',
                    value: 5
                },
                {
                    name: 'Homewood North',
                    value: 4
                },
                {
                    name: 'Homewood West',
                    value: 4
                },
                {
                    name: 'Allentown',
                    value: 4
                },
                {
                    name: 'Polish Hill',
                    value: 4
                },
                {
                    name: 'Fairywood',
                    value: 4
                },
                {
                    name: 'Central Northside',
                    value: 4
                },
                {
                    name: 'Duquesne Heights',
                    value: 4
                },
                {
                    name: 'Oakwood',
                    value: 4
                },
                {
                    name: 'Terrace Village',
                    value: 4
                },
                {
                    name: 'Middle Hill',
                    value: 3
                },
                {
                    name: 'West End',
                    value: 3
                },
                {
                    name: 'Stanton Heights',
                    value: 3
                },
                {
                    name: 'East Allegheny',
                    value: 3
                },
                {
                    name: 'Point Breeze North',
                    value: 3
                },
                {
                    name: 'Bon Air',
                    value: 3
                },
                {
                    name: 'Central Lawrenceville',
                    value: 3
                },
                {
                    name: 'Spring Garden',
                    value: 3
                },
                {
                    name: 'Spring Hill-City View',
                    value: 3
                }, {
                    name: 'Perry South',
                    value: 3
                }, {
                    name: 'Hays',
                    value: 3
                }, {
                    name: 'Bedford Dwellings',
                    value: 3
                }, {
                    name: 'Larimer',
                    value: 3
                }, {
                    name: 'Lower Lawrenceville',
                    value: 2
                }, {
                    name: 'Esplen',
                    value: 2
                }, {
                    name: 'East Carnegie',
                    value: 2
                }, {
                    name: 'Westwood',
                    value: 2
                }, {
                    name: 'Bluff',
                    value: 2
                }, {
                    name: 'Central Oakland',
                    value: 2
                }, {
                    name: 'West Oakland',
                    value: 1
                }, {
                    name: 'Strip District',
                    value: 1
                }]
            }]


            var formatUtil = echarts.format;
            divisionTreeChart.setOption(divisionTreeoption = {
                title: {
                    text: "Number of equipment and neighbourhoods",
                    left: 'center',

                    textStyle: {
                        color: "#336666",
                        fontFamily: "",
                        fontSize: "1.5em",
                        fontFamily: 'Montserrat'
                    },
                    subtext: 'Click on the blocks to explore the number of playgrounds in each neighbourhood.',
                    subtextStyle: {
                        color: "#336666",
                        fontFamily: "",
                        fontSize: "1.0em",
                        fontFamily: 'Montserrat'
                    },
                },

                tooltip: {
                    // part of code adapted from https://echarts.apache.org/examples/en/index.html#chart-type-treemap
                    formatter: function (info) {
                        var value = info.value;
                        var treePathInfo = info.treePathInfo;
                        var treePath = [];

                        for (var i = 1; i < treePathInfo.length; i++) {
                            treePath.push(treePathInfo[i].name);
                        }

                        return [
                            '<div class="tooltip-title">' + formatUtil.encodeHTML(treePath.join(' : ')) + '</div>',
                            'number of playground equipments: ' + formatUtil.addCommas(value),
                        ].join('');
                    }
                },

                series: [
                    {
                        name: 'neighbourhoods',
                        type: 'treemap',
                        visibleMin: 300,
                        label: {
                            show: true,
                            formatter: '{b}'
                        },
                        upperLabel: {
                            show: false,
                            height: 30
                        },
                        itemStyle: {
                            borderColor: '#FFFFCC'
                        },
                        levels: [
                            {
                                itemStyle: {
                                    borderColor: '#FFFFCC',
                                    borderWidth: 0,
                                },
                                upperLabel: {
                                    show: false
                                }
                            },
                            {

                                color: ['#a1d99b', '#005a32'],
                                colorMappingBy: 'value',
                                itemStyle: {
                                    borderColor: '#FFFFCC',
                                    gapWidth: 0
                                },
                                emphasis: {
                                    itemStyle: {
                                        borderColor: '#FFFFCC'
                                    }
                                }
                            },
                            {

                                itemStyle: {
                                    borderWidth: 0,
                                    gapWidth: 1,
                                }
                            }
                        ],
                        data: diskData,
                        backgroundColor: '#FFFFCC'
                    }
                ]
            });

            if (divisionTreeoption && typeof divisionTreeoption === 'object') {
                divisionTreeChart.setOption(divisionTreeoption);
            }


        </script>

        <script>
            //line chart script
            var lineChartEles = document.getElementById("lineChartContainer");
            var mylineChart = echarts.init(lineChartEles);
            var app = {};

            var myLineChartOption = {
                title: {
                    text: "Fire zone and Date",
                    left: 'center',

                    textStyle: {
                        color: "#336666",
                        fontFamily: "",
                        fontSize: "1.5em",
                        fontFamily: 'Montserrat'
                    },
                    subtext: 'Fire zone date updates ensure that fire equipment is available at all times',
                    subtextStyle: {
                        color: "#336666",
                        fontFamily: "",
                        fontSize: "1.0em",
                        fontFamily: 'Montserrat'
                    },
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross'
                    },

                },
                toolbox: {
                    show: true,
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: ['2021/1/2', '2021/1/5', '2021/1/6', '2021/1/7', '2021/1/8', '2021/1/9', '2021/1/10', '2021/1/11', '2021/1/12', '2021/1/14', '2021/1/15', '2021/1/16', '2021/1/17', '2021/1/18', '2021/1/19', '2021/1/21', '2021/1/27', '2021/2/1', '2021/2/5', '2021/2/6', '2021/2/8', '2021/2/10', '2021/2/11', '2021/2/12', '2021/2/13', '2021/2/15', '2021/2/16', '2021/2/17', '2021/2/18', '2021/2/19', '2021/2/21', '2021/2/22', '2021/3/1', '2021/3/2', '2021/3/3', '2021/3/4', '2021/3/5', '2021/3/7', '2021/3/8', '2021/3/9', '2021/3/10', '2021/3/12', '2021/3/13', '2021/3/14', '2021/3/15', '2021/3/17', '2021/3/18', '2021/3/23', '2021/4/1', '2021/4/3', '2021/4/5', '2021/4/7', '2021/4/9', '2021/4/12', '2021/4/16', '2021/4/20', '2021/4/22', '2021/4/23', '2021/4/24', '2021/4/26', '2021/4/27', '2021/4/28']
                },
                yAxis: {
                    type: 'value',
                    axisPointer: {
                        snap: true
                    }
                },
                visualMap: {
                    show: false,
                    type: 'continuous',
                    seriesIndex: 0,
                    min: 0,
                    max: 23
                },
                series: [
                    {
                        name: 'number of playground equipments:',
                        type: 'line',
                        smooth: true,
                        data: [7, 6, 7, 8, 7, 2, 8, 3, 3, 11, 6, 22, 14, 7, 6, 4, 2, 10, 6, 4, 21, 11, 5, 7, 10, 3, 9, 3, 10, 6, 11, 5, 7, 1, 5, 9, 5, 8, 4, 10, 18, 3, 2, 3, 3, 8, 3, 4, 8, 3, 6, 7, 6, 4, 4, 17, 11, 3, 5, 7, 6, 21],
                    }
                ]
            };

            if (myLineChartOption && typeof myLineChartOption === 'object') {
                mylineChart.setOption(myLineChartOption);
            }
        </script>

        <script>
            var sunburst_dom = document.getElementById("sunburst_container");
            var sunburst_myChart = echarts.init(sunburst_dom);
            let sunburst_data = [{
                value: 227,
                name: 'Playworld',
                itemStyle: { color: '#67000d' },
                children: [{
                    value: 64,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 43,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 42,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 20,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },
                {
                    value: 12,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },
                {
                    value: 10,
                    name: 'Geo Climber',
                    itemStyle: { color: '#fee0d2' }
                },
                {
                    value: 10,
                    name: 'Spinner - Cozy Cocoon',
                    itemStyle: { color: '#fff5f0' }
                },
                {
                    value: 4,
                    name: 'Swing 4 Bays',
                    itemStyle: { color: '#6a51a3' }
                },
                {
                    value: 2,
                    name: 'Wall Climber',
                    itemStyle: { color: '#dadaeb' }
                },
                {
                    value: 2,
                    name: 'Swing 1 Bay',
                    itemStyle: { color: '#9e9ac8' }
                },
                {
                    value: 2,
                    name: 'Spring Toy - Butterfly',
                    itemStyle: { color: '#969696' }
                },
                {
                    value: 2,
                    name: 'Balance Beam - Sidewalk',
                    itemStyle: { color: '#737373' }
                },
                {
                    value: 2,
                    name: 'Spring Toy - Fire Truck',
                    itemStyle: { color: '#bcbddc' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Squirrel',
                    itemStyle: { color: '#e0ecf4' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Turtle',
                    itemStyle: { color: '#efedf5' }
                },
                {
                    value: 1,
                    name: 'Balance Beam',
                    itemStyle: { color: '#fdae6b' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Dinosaur',
                    itemStyle: { color: '#74c476' }
                },
                {
                    value: 1,
                    name: 'Climber - Crawl Tube',
                    itemStyle: { color: '#810f7c' }
                },
                {
                    value: 1,
                    name: 'Ladder Climber',
                    itemStyle: { color: '#88419d' }
                },
                {
                    value: 1,
                    name: 'Whirl',
                    itemStyle: { color: '#fcbba1' }
                },
                {
                    value: 1,
                    name: 'Spinner - Spin Cup',
                    itemStyle: { color: '#9ebcda' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Motorcycle',
                    itemStyle: { color: '#fee6ce' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Seat',
                    itemStyle: { color: '#bfd3e6' }
                },
                {
                    value: 1,
                    name: 'Climber - Overhead',
                    itemStyle: { color: '#fd8d3c' }
                },
                {
                    value: 1,
                    name: 'Spinner',
                    itemStyle: { color: '#d94801' }
                },]
            }, {
                value: 76,
                name: 'Little Tykes',
                itemStyle: { color: '#a50f15' },
                children: [{
                    value: 18,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 16,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 13,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 8,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },
                {
                    value: 4,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },
                {
                    value: 3,
                    name: 'Swing 4 Bays',
                    itemStyle: { color: '#6a51a3' }
                },
                {
                    value: 3,
                    name: 'Slide',
                    itemStyle: { color: '#807dba' }
                },
                {
                    value: 2,
                    name: 'Swing 1 Bay',
                    itemStyle: { color: '#9e9ac8' }
                },
                {
                    value: 2,
                    name: 'Spring Toy - Turtle',
                    itemStyle: { color: '#efedf5' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Bunny',
                    itemStyle: { color: '#9ecae1' }
                },
                {
                    value: 1,
                    name: 'Whirl',
                    itemStyle: { color: '#fcbba1' }
                },
                {
                    value: 1,
                    name: 'Swing 5 Bays',
                    itemStyle: { color: '#a1d99b' }
                },
                {
                    value: 1,
                    name: 'Geo Climber',
                    itemStyle: { color: '#fee0d2' }
                },
                {
                    value: 1,
                    name: 'Balance Beam',
                    itemStyle: { color: '#fdae6b' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Bulldozer',
                    itemStyle: { color: '#525252' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Dragon',
                    itemStyle: { color: '#c6dbef' }
                },]
            }, {
                value: 32,
                name: 'Gametime',
                itemStyle: { color: '#3f007d' },
                children: [{
                    value: 18,
                    name: 'Whirl',
                    itemStyle: { color: '#fcbba1' }
                },
                {
                    value: 3,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 3,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 2,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },
                {
                    value: 2,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 1,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },
                {
                    value: 1,
                    name: 'Swing 1 Bay',
                    itemStyle: { color: '#9e9ac8' }
                },
                {
                    value: 1,
                    name: 'Spinner',
                    itemStyle: { color: '#d94801' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Pony',
                    itemStyle: { color: '#fdd0a2' }
                },]
            }, {
                value: 32,
                name: 'Unknown',
                itemStyle: { color: '#54278f' },
                children: [{
                    value: 4,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 4,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },
                {
                    value: 4,
                    name: 'Slide',
                    itemStyle: { color: '#807dba' }
                },
                {
                    value: 3,
                    name: 'Spring Toy - Fire Truck',
                    itemStyle: { color: '#bcbddc' }
                },
                {
                    value: 2,
                    name: 'Stepping Pod - 5',
                    itemStyle: { color: '#bdbdbd' }
                },
                {
                    value: 2,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 2,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 2,
                    name: 'Whirl',
                    itemStyle: { color: '#fcbba1' }
                },
                {
                    value: 2,
                    name: 'Swing 1 Bay',
                    itemStyle: { color: '#9e9ac8' }
                },
                {
                    value: 2,
                    name: 'Geo Climber',
                    itemStyle: { color: '#fee0d2' }
                },
                {
                    value: 1,
                    name: 'Stepping Pod - 6',
                    itemStyle: { color: '#8c6bb1' }
                },
                {
                    value: 1,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Bulldozer',
                    itemStyle: { color: '#525252' }
                },
                {
                    value: 1,
                    name: 'Spinner - Cozy Cocoon',
                    itemStyle: { color: '#fff5f0' }
                },
                {
                    value: 1,
                    name: 'Swing 4 Bays',
                    itemStyle: { color: '#6a51a3' }
                },]
            }, {
                value: 19,
                name: 'Landscape Structures',
                itemStyle: { color: '#7f2704' },
                children: [{
                    value: 6,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 4,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },
                {
                    value: 3,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 3,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 1,
                    name: 'Whirl',
                    itemStyle: { color: '#fcbba1' }
                },
                {
                    value: 1,
                    name: 'Wall Climber',
                    itemStyle: { color: '#dadaeb' }
                },
                {
                    value: 1,
                    name: 'Climber - Overhead',
                    itemStyle: { color: '#fd8d3c' }
                },]
            }, {
                value: 18,
                name: 'Kompan',
                itemStyle: { color: '#a63603' },
                children: [{
                    value: 3,
                    name: 'Spinner - Spica',
                    itemStyle: { color: '#f16913' }
                },
                {
                    value: 2,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 2,
                    name: 'Spinner - Spica Junior',
                    itemStyle: { color: '#d9d9d9' }
                },
                {
                    value: 1,
                    name: 'Play Area Preschool Steam Engine',
                    itemStyle: { color: '#2171b5' }
                },
                {
                    value: 1,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },
                {
                    value: 1,
                    name: 'Play Area Preschool Home and Garden',
                    itemStyle: { color: '#6baed6' }
                },
                {
                    value: 1,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 1,
                    name: 'Slide - Preschool',
                    itemStyle: { color: '#c7e9c0' }
                },
                {
                    value: 1,
                    name: 'Play Area Preschool Workshop',
                    itemStyle: { color: '#238b45' }
                },
                {
                    value: 1,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },
                {
                    value: 1,
                    name: 'Play Area Preschool',
                    itemStyle: { color: '#f0f0f0' }
                },
                {
                    value: 1,
                    name: 'Rock-It',
                    itemStyle: { color: '#f7fbff' }
                },
                {
                    value: 1,
                    name: 'Whirl - Supernova',
                    itemStyle: { color: '#deebf7' }
                },
                {
                    value: 1,
                    name: 'Swing 1 Bay',
                    itemStyle: { color: '#9e9ac8' }
                },]
            }, {
                value: 13,
                name: 'Park Structures',
                itemStyle: { color: '#000000' },
                children: [{
                    value: 4,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 3,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 3,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },
                {
                    value: 1,
                    name: 'Wall Climber',
                    itemStyle: { color: '#dadaeb' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Motorcycle',
                    itemStyle: { color: '#fee6ce' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Pony',
                    itemStyle: { color: '#fdd0a2' }
                },]
            }, {
                value: 13,
                name: 'Big Toys',
                itemStyle: { color: '#252525' },
                children: [{
                    value: 2,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 2,
                    name: 'Slide',
                    itemStyle: { color: '#807dba' }
                },
                {
                    value: 1,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 1,
                    name: 'Swing 4 Bays',
                    itemStyle: { color: '#6a51a3' }
                },
                {
                    value: 1,
                    name: 'Climber - Wood',
                    itemStyle: { color: '#4292c6' }
                },
                {
                    value: 1,
                    name: 'Climber - Uneven Bars',
                    itemStyle: { color: '#41ab5d' }
                },
                {
                    value: 1,
                    name: 'Spinner',
                    itemStyle: { color: '#d94801' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Whale',
                    itemStyle: { color: '#4d004b' }
                },
                {
                    value: 1,
                    name: 'Spring Toy - Stand Up',
                    itemStyle: { color: '#8c96c6' }
                },
                {
                    value: 1,
                    name: 'Climber - Loop',
                    itemStyle: { color: '#e5f5e0' }
                },
                {
                    value: 1,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },]
            }, {
                value: 9,
                name: 'Iron Mountain Forge',
                itemStyle: { color: '#00441b' },
                children: [{
                    value: 3,
                    name: 'Play Area 5 to 12',
                    itemStyle: { color: '#08519c' }
                },
                {
                    value: 3,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },
                {
                    value: 1,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 1,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },
                {
                    value: 1,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },]
            }, {
                value: 3,
                name: 'Burke',
                itemStyle: { color: '#006d2c' },
                children: [{
                    value: 1,
                    name: 'Swing 2 Bays',
                    itemStyle: { color: '#ef3b2c' }
                },
                {
                    value: 1,
                    name: 'Play Area 2 to 12',
                    itemStyle: { color: '#fc9272' }
                },
                {
                    value: 1,
                    name: 'Play Area 2 to 5',
                    itemStyle: { color: '#cb181d' }
                },]
            }, {
                value: 3,
                name: 'Miracle',
                itemStyle: { color: '#08306b' },
                children: [{
                    value: 3,
                    name: 'Swing 3 Bays',
                    itemStyle: { color: '#fb6a4a' }
                },]
            },];

            let sunburst_option = {
                title: {
                    text: "Manufactories and their products(playground equipment types)",
                    left: 'center',

                    textStyle: {
                        color: "#336666",
                        fontFamily: "",
                        fontSize: "1.5em",
                        fontFamily: 'Montserrat'
                    },
                },
                tooltip: {
                    trigger: 'item',
                    formatter: "{b} : {c}"
                },
                series: {
                    radius: ['15%', '70%'],
                    type: 'sunburst',
                    sort: null,
                    emphasis: {
                        focus: 'ancestor'
                    },
                    data: sunburst_data,
                    label: {
                        rotate: 'radial',
                        show: false
                    },
                    levels: [],
                    itemStyle: {
                        color: '#ddd',
                        borderWidth: 1,
                        borderRadius: 6,
                    }
                }
            };

            if (sunburst_option && typeof sunburst_option === 'object') {
                sunburst_myChart.setOption(sunburst_option);
            }

        </script>
</body>

</html>